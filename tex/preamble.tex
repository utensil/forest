\usepackage[utf8]{inputenc}
\usepackage{amsmath,amsfonts,amssymb}
% e.g. \xmapsto
\usepackage{mathtools}
% e.g. \fatsemi
\usepackage{stmaryrd}
\usepackage{mathrsfs}

%% TOC and Index

\setcounter{tocdepth}{5}
\setcounter{secnumdepth}{5}

% https://www.overleaf.com/learn/latex/Indices
% https://tex.stackexchange.com/a/58236/75671
\usepackage{imakeidx}
\makeindex[columns=3, title=Alphabetical Index, intoc]

%% Sections and paragraphs

% https://www.overleaf.com/learn/latex/Articles%2FHow_to_change_paragraph_spacing_in_LaTeX#Understanding_\baselinestretch_and_\linespread
% \renewcommand{\baselinestretch}{1.2}\selectfont
\linespread{1.1}

% https://www.overleaf.com/learn/latex/Articles%2FHow_to_change_paragraph_spacing_in_LaTeX#The_parskip_package
\setlength{\parskip}{3ex plus 0.5ex minus 0.2ex}
\setlength{\parindent}{0cm}
% \usepackage[skip=3.3ex]{parskip}

% https://tex.stackexchange.com/a/364574/75671
\newcommand{\subsubsubsection}[1]{\paragraph{#1}\mbox{}\\}

%% Typesetting

\hyphenpenalty=750

\usepackage{microtype}
\usepackage{xspace}
\usepackage{xpatch}

% https://tex.stackexchange.com/a/119229/75671
% \newlength{\mytextsize}
% \makeatletter
% \setlength{\mytextsize}{\f@size pt}

%% Colors and graphics

\usepackage[svgnames,dvipsnames]{xcolor}
% \PassOptionsToPackage{usenames,svgnames,dvipsnames}{xcolor}
% \usepackage{amsmath,amsfonts,amsthm,amssymb}
\usepackage{graphicx}
\DeclareGraphicsExtensions{.svg,.png,.jpg}
% \usepackage{tikz}
% \usepackage{tikz-cd}
% \usetikzlibrary{shapes,arrows,decorations}
% \usepackage{color}

\usepackage{float} %figure inside minipage

\usepackage[autosize,debug]{dot2texi}

%% Url and cross-references

% \PassOptionsToPackage{hyphens}{url}
% \usepackage[unicode]{hyperref}
\usepackage[unicode,pagebackref=true,bookmarksopen=true,bookmarksdepth=5,backref=section,pdfusetitle]{hyperref}
\hypersetup{
    bookmarksnumbered=true,     
    bookmarksopen=true,         
    bookmarksopenlevel=1, 
    pdfpagemode=UseOutlines,
    colorlinks=true,
    linkcolor={red!50!black},
    citecolor={green!50!black},
    urlcolor={blue!80!black}
}
% `cleverref`' has to be loaded after `hyperref`
\usepackage{cleveref}
\usepackage{backref}
% % Back refs
% \renewcommand*{\backrefalt}[4]{%
%     \ifcase #1 \footnotesize{(Not cited.)}%
%     \or        \footnotesize{(Cited on page~#2)}%
%     \else      \footnotesize{(Cited on pages~#2)}%
%     \fi}
% Back refs
\renewcommand*{\backrefalt}[4]{%
    \ifcase #1 \relax % No citations
    \or        \footnotesize{(Cited in section~#2)}%
    \else      \footnotesize{(Cited in sections~#2)}%
    \fi}

% Not needed, it counts duplicates inside a page/section
% \renewcommand*{\backrefentrycount}[2]{%
%     #1%
%     \ifnum#2>1 %
%         ~(#2 times)%
%     \fi
% }

%% Framed boxes for definitions, theorems, remarks etc.

\input{../tex/mdframed}
% \input{../tex/tcolorbox}

%% Special markups

% https://www.overleaf.com/learn/latex/Typesetting_quotations
\usepackage{csquotes}

% NOTE: Won't work in web version for roman numerals, but it works well for PDF version
\usepackage{enumerate}% http://ctan.org/pkg/enumerate

\usepackage{todonotes}
\todostyle{uts}{color=LightGoldenrodYellow,shadow,inline}
% \usepackage[textsize=scriptsize,shadow]{todonotes}

% https://tex.stackexchange.com/questions/383054/biblatex-error-incompatible-backref-package
% \usepackage[backend=biber]{biblatex}

%% Include tex or graphics

% avoid package load order conflicts etc.
% otherwise with only
% \usepackage[subpreambles=true]{standalone}
% we have errors like:
% (/usr/local/texlive/2024/texmf-dist/tex/latex/spath3/tikzlibraryspath3.code.tex
% (/usr/local/texlive/2024/texmf-dist/tex/latex/spath3/spath3.sty)))
% (../tex/string-diagrams.tex
% (/usr/local/texlive/2024/texmf-dist/tex/latex/string-diagrams/string-diagrams.s
% ty)) (../tex/diagrams.tex

% ! LaTeX Error: Command \dontworryaboutit already defined.
%                Or name \end... illegal, see p.192 of the manual.
\usepackage[mode=tex,subpreambles=true]{standalone}
% \usepackage[mode=tex,subpreambles=true,print,sort]{standalone}

%% Meta information

\date{\today}

%% Special symbols

\usepackage{newunicodechar}

% \usepackage{mathbbol}
% \DeclareMathSymbol{\fcmp}{\mathrel}{bbold}{\lq\;}
% \newunicodechar{â¨¾}{\fcmp}

% from stmaryrd
\newunicodechar{â¨¾}{\fatsemi}
% \usepackage{utfsym}
% \newunicodechar{ðŸ‘‰}{\usym{261E}}
% hide it for now
\newunicodechar{ðŸ‘‰}{}

\newcommand{\newvocab}[1]{\textbf{\color{MidnightBlue} #1}}
\newcommand{\vocab}[1]{\textbf{#1}}

%% Math symbols

\newcommand{\CC}{\mathbb C}
\newcommand{\FF}{\mathbb F}
\newcommand{\NN}{\mathbb N}
\newcommand{\QQ}{\mathbb Q}
\newcommand{\RR}{\mathbb R}
\newcommand{\ZZ}{\mathbb Z}

\def\Cl{\mathop{\mathcal{C}\ell}}
\def\Ga{\mathop{\mathcal{G}}}

\newcommand{\lmap}[1]{\to_{l[#1]}}
\newcommand{\rmap}{\to_{+*}}
\newcommand{\amap}{\to_{a}}
\newcommand{\lfun}{\iota}
\newcommand{\rfun}{\mathit{1}} %{\iota_{0}}
\newcommand{\afun}{\iota_{a}}

\newcommand{\Mathlib}{\textsf{Mathlib}~}
\newcommand{\MathlibDoc}[1]{\href{https://leanprover-community.github.io/mathlib4_docs/find/\#docs/#1}{#1}}

\newcommand{\bu}{\bullet}
\newcommand{\ii}{\item}
\newcommand\placeholder[1]{\texttt{#1}}
\newcommand\optional[1]{{\color{Grey} #1}}

\newcommand\pre{\mathtt{pre}}

%% Category Theory macros

\renewcommand{\AA}{\mathcal A}
\newcommand{\BB}{\mathcal B}
\newcommand{\C}{\mathcal C}
\newcommand{\obj}{\operatorname{obj}}
\newcommand{\op}{^{\mathrm{op}}}
\newcommand{\id}{\mathrm{id}}
\DeclareMathOperator{\dom}{dom} % domain
\DeclareMathOperator{\ran}{ran} % range
\DeclareMathOperator{\Hom}{Hom} % homomorphism
\DeclareMathOperator{\End}{End} % endomorphism

%% Code highlighting

\input{../tex/code}